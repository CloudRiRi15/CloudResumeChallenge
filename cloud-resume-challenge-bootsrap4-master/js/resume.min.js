/*!
 * Start Bootstrap - Resume v4.0.0-beta.2 (https://startbootstrap.com/template-overviews/resume)
 * Copyright 2013-2017 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-resume/blob/master/LICENSE)
 */
!function(e){"use strict";e('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if((t=t.length?t:e("[name="+this.hash.slice(1)+"]")).length)return e("html, body").animate({scrollTop:t.offset().top},1e3,"easeInOutExpo"),!1}}),e(".js-scroll-trigger").click(function(){e(".navbar-collapse").collapse("hide")}),e("body").scrollspy({target:"#sideNav"})}(jQuery);

// Updated JavaScript Code for the Lambda Function unique visitor counter
const counter = document.querySelector(".counter-number");
const COOKIE_NAME = 'uniqueVisitor';

function getCookie(cookieName) {
    let name = cookieName + "=";
    let decodedCookie = decodeURIComponent(document.cookie);
    let cookieArray = decodedCookie.split(';');
    for (let i = 0; i < cookieArray.length; i++) {
        let cookie = cookieArray[i];
        while (cookie.charAt(0) === ' ') {
            cookie = cookie.substring(1);
        }
        if (cookie.indexOf(name) === 0) {
            return cookie.substring(name.length, cookie.length);
        }
    }
    return "";
}

function generateUniqueIdentifier() {
    // You can use a library or generate a random string here for a unique identifier
    // For simplicity, let's use a timestamp in this example
    return Date.now().toString();
}

async function updateCounter() {
    let uniqueVisitorCookie = getCookie(COOKIE_NAME);
    if (!uniqueVisitorCookie) {
        // If the cookie is not set, it's a new visitor
        let uniqueIdentifier = generateUniqueIdentifier();
        // Set the cookie to expire after 30 days
        document.cookie = `${COOKIE_NAME}=${uniqueIdentifier}; Max-Age=2592000; Path=/;`;
    }

    let response = await fetch("https://4na4rafjx4kzcyzoyvn3pl4iyq0hktok.lambda-url.us-east-1.on.aws/");
    let data = await response.json();
    counter.innerHTML = `Site Visits: ${data}`;
}

updateCounter();
